<!DOCTYPE html>
<html xmlns="http://www.w3.org/1999/xhtml" lang="en" xml:lang="en"><head>

<meta charset="utf-8">
<meta name="generator" content="quarto-1.2.269">

<meta name="viewport" content="width=device-width, initial-scale=1.0, user-scalable=yes">


<title>PennSIVE Wiki – cluster_rstudio</title>
<style>
code{white-space: pre-wrap;}
span.smallcaps{font-variant: small-caps;}
div.columns{display: flex; gap: min(4vw, 1.5em);}
div.column{flex: auto; overflow-x: auto;}
div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
ul.task-list{list-style: none;}
ul.task-list li input[type="checkbox"] {
  width: 0.8em;
  margin: 0 0.8em 0.2em -1.6em;
  vertical-align: middle;
}
</style>


<script src="site_libs/quarto-nav/quarto-nav.js"></script>
<script src="site_libs/quarto-nav/headroom.min.js"></script>
<script src="site_libs/clipboard/clipboard.min.js"></script>
<script src="site_libs/quarto-search/autocomplete.umd.js"></script>
<script src="site_libs/quarto-search/fuse.min.js"></script>
<script src="site_libs/quarto-search/quarto-search.js"></script>
<meta name="quarto:offset" content="./">
<script src="site_libs/quarto-html/quarto.js"></script>
<script src="site_libs/quarto-html/popper.min.js"></script>
<script src="site_libs/quarto-html/tippy.umd.min.js"></script>
<script src="site_libs/quarto-html/anchor.min.js"></script>
<link href="site_libs/quarto-html/tippy.css" rel="stylesheet">
<link href="site_libs/quarto-html/quarto-syntax-highlighting.css" rel="stylesheet" id="quarto-text-highlighting-styles">
<script src="site_libs/bootstrap/bootstrap.min.js"></script>
<link href="site_libs/bootstrap/bootstrap-icons.css" rel="stylesheet">
<link href="site_libs/bootstrap/bootstrap.min.css" rel="stylesheet" id="quarto-bootstrap" data-mode="light">
<script id="quarto-search-options" type="application/json">{
  "location": "navbar",
  "copy-button": false,
  "collapse-after": 3,
  "panel-placement": "end",
  "type": "overlay",
  "limit": 20,
  "language": {
    "search-no-results-text": "No results",
    "search-matching-documents-text": "matching documents",
    "search-copy-link-title": "Copy link to search",
    "search-hide-matches-text": "Hide additional matches",
    "search-more-match-text": "more match in this document",
    "search-more-matches-text": "more matches in this document",
    "search-clear-button-title": "Clear",
    "search-detached-cancel-button-title": "Cancel",
    "search-submit-button-title": "Submit"
  }
}</script>


<link rel="stylesheet" href="styles.css">
</head>

<body class="nav-sidebar docked nav-fixed">

<div id="quarto-search-results"></div>
  <header id="quarto-header" class="headroom fixed-top">
    <nav class="navbar navbar-expand-lg navbar-dark ">
      <div class="navbar-container container-fluid">
      <div class="navbar-brand-container">
    <a href="./index.html" class="navbar-brand navbar-brand-logo">
    <img src="./logo.png" alt="" class="navbar-logo">
    </a>
    <a class="navbar-brand" href="./index.html">
    <span class="navbar-title">PennSIVE Wiki</span>
    </a>
  </div>
          <button class="navbar-toggler" type="button" data-bs-toggle="collapse" data-bs-target="#navbarCollapse" aria-controls="navbarCollapse" aria-expanded="false" aria-label="Toggle navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
  <span class="navbar-toggler-icon"></span>
</button>
          <div class="collapse navbar-collapse" id="navbarCollapse">
            <ul class="navbar-nav navbar-nav-scroll me-auto">
  <li class="nav-item">
    <a class="nav-link" href="./index.html">
 <span class="menu-text">Welcome</span></a>
  </li>  
</ul>
              <div id="quarto-search" class="" title="Search"></div>
          </div> <!-- /navcollapse -->
      </div> <!-- /container-fluid -->
    </nav>
  <nav class="quarto-secondary-nav" data-bs-toggle="collapse" data-bs-target="#quarto-sidebar" aria-controls="quarto-sidebar" aria-expanded="false" aria-label="Toggle sidebar navigation" onclick="if (window.quartoToggleHeadroom) { window.quartoToggleHeadroom(); }">
    <div class="container-fluid d-flex justify-content-between">
      <h1 class="quarto-secondary-nav-title"></h1>
      <button type="button" class="quarto-btn-toggle btn" aria-label="Show secondary navigation">
        <i class="bi bi-chevron-right"></i>
      </button>
    </div>
  </nav>
</header>
<!-- content -->
<div id="quarto-content" class="quarto-container page-columns page-rows-contents page-layout-article page-navbar">
<!-- sidebar -->
  <nav id="quarto-sidebar" class="sidebar collapse sidebar-navigation docked overflow-auto">
    <div class="sidebar-menu-container"> 
    <ul class="list-unstyled mt-1">
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./environments.html" class="sidebar-item-text sidebar-link">Environment setup</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./projects.html" class="sidebar-item-text sidebar-link">Project setup</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./heudiconv.html" class="sidebar-item-text sidebar-link">Dicom Conversion</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./flywheel.html" class="sidebar-item-text sidebar-link">Flywheel</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./pipelines.html" class="sidebar-item-text sidebar-link">PennSIVE pipelines</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./reproducibility.html" class="sidebar-item-text sidebar-link">Reproducibility</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./workflows.html" class="sidebar-item-text sidebar-link">Nipype workflows</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cluster_intro.html" class="sidebar-item-text sidebar-link">Cluster Computing</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./bash_startup.html" class="sidebar-item-text sidebar-link">PennSIVE Bash Startup Scripts</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./cluster_rstudio.html" class="sidebar-item-text sidebar-link active">Using RStudio/Jupyter Lab on the Cluster</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./gpu-computing.html" class="sidebar-item-text sidebar-link">GPU Computing</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./rpackages.html" class="sidebar-item-text sidebar-link">R Packages</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./python.html" class="sidebar-item-text sidebar-link">Intro to Python</a>
  </div>
</li>
        <li class="sidebar-item">
  <div class="sidebar-item-container"> 
  <a href="./contributing.html" class="sidebar-item-text sidebar-link">Contributing to this Wiki</a>
  </div>
</li>
    </ul>
    </div>
</nav>
<!-- margin-sidebar -->
    <div id="quarto-margin-sidebar" class="sidebar margin-sidebar">
        <nav id="TOC" role="doc-toc" class="toc-active">
    <h2 id="toc-title">On this page</h2>
   
  <ul>
  <li><a href="#using-rstudiojupyter-lab-on-the-cluster" id="toc-using-rstudiojupyter-lab-on-the-cluster" class="nav-link active" data-scroll-target="#using-rstudiojupyter-lab-on-the-cluster">Using RStudio/Jupyter Lab on the Cluster</a>
  <ul class="collapse">
  <li><a href="#add-relevant-aliases-to-your-local-computer" id="toc-add-relevant-aliases-to-your-local-computer" class="nav-link" data-scroll-target="#add-relevant-aliases-to-your-local-computer">Add relevant aliases to your local computer</a></li>
  </ul></li>
  <li><a href="#using-rstudio" id="toc-using-rstudio" class="nav-link" data-scroll-target="#using-rstudio">Using RStudio</a></li>
  <li><a href="#using-rstudio-1" id="toc-using-rstudio-1" class="nav-link" data-scroll-target="#using-rstudio-1">Using RStudio</a></li>
  </ul>
</nav>
    </div>
<!-- main -->
<main class="content" id="quarto-document-content">



<section id="using-rstudiojupyter-lab-on-the-cluster" class="level1">
<h1>Using RStudio/Jupyter Lab on the Cluster</h1>
<p>To use RStudio or Jupyter Lab on the cluster, first navigate to the <code>PennSIVE Bash Startup Scripts</code> tab and make sure you have those aliases and startup commands in your bash startup files. Then, make sure you have sourced those startup files (See the <code>Source new startup scripts</code> on the <code>PennSIVE Bash Startup Scripts</code> tab.)</p>
<section id="add-relevant-aliases-to-your-local-computer" class="level2">
<h2 class="anchored" data-anchor-id="add-relevant-aliases-to-your-local-computer">Add relevant aliases to your local computer</h2>
<p>To make it easier to use RStudio/Jupyter Lab on the cluster, add the following aliases to your local bash. One easy way to do this is to edit the first four lines of the following code block (See the <code>.env</code> header on the <code>PennSIVE Bash Startup Scripts</code> tab) and then copy-paste the following code block at the bottom of the <code>.bash_profile</code> file on your personal computer. Make sure the PREFERRED_PORT you use here is identical to the one you used on the cluster.</p>
<pre><code>CBICA_USERNAME="your_cbica_username"
PMACS_USERNAME="your_pmacs_username"
PREFERRED_PORT="your_preferred_port"
PREFERRED_PORT2=$(($PREFERRED_PORT + 1))

alias sciget="ssh ${PMACS_USERNAME}@sciget.pmacs.upenn.edu"
alias scisub="ssh ${PMACS_USERNAME}@scisub.pmacs.upenn.edu"
alias takim="ssh ${PMACS_USERNAME}@takim"
alias takimx="ssh -Y ${PMACS_USERNAME}@takim"
alias takimhttp="ssh -L ${PREFERRED_PORT}:127.0.0.1:${PREFERRED_PORT} -q ${PMACS_USERNAME}@takim"
alias takimhttp2="ssh -L ${PREFERRED_PORT2}:127.0.0.1:${PREFERRED_PORT2} -q ${PMACS_USERNAME}@takim"</code></pre>
<p>Once the code is copied into your <code>.bash_profile</code>, load the edits with the following command (<code>source ~/.bash_profile</code>)</p>
<p>Now, once you connect to the PMACS VPN, you can easily ssh into the takim server by simply typing and entering the alias <code>takim</code>.</p>
</section>
</section>
<section id="using-rstudio" class="level1">
<h1>Using RStudio</h1>
<p>To use RStudio on the cluster, follow the below steps:</p>
<ol type="1">
<li>Connect to PMACS VPN</li>
<li>Enter takim with ssh tunneling (<code>takimhttp</code>)</li>
<li>Start RStudio singularity container (<code>rstudio</code>)</li>
<li>Go to your favorite web browser (ie Chrome, Firefox, etc) and navigate to the following URL (localhost:your_preferred_port).</li>
</ol>
<ol type="a">
<li>For example, if my preferred port is 1520, I would navigate to (localhost:1520).</li>
<li>If you have forgotten your preferred port, you can find it with this command (<code>echo $PREFERRED_PORT</code>)</li>
</ol>
<ol start="5" type="1">
<li>This should open RStudio in your browser, and you can use it like you normally do.</li>
</ol>
<ol type="a">
<li>One caveat is that, due to how this RStudio is set up, you are unable to access files outside of your home folder (<code>~/</code>), so if you need files from the <code>/project</code> folder, you may need to copy them into your home folder.</li>
</ol>
<p>Note: Please do not run large jobs in browser RStudio. Anything you run here runs on the login node (takim), which is not designed to have large computing power. If you run something too big, it will crash the takim login server, and nobody else will be able to use the cluster until it is restarted by PMACS!</p>
</section>
<section id="using-rstudio-1" class="level1">
<h1>Using RStudio</h1>
<p>To use Jupyter Lab on the cluster, follow the below steps:</p>
<ol type="1">
<li>Connect to PMACS VPN</li>
<li>Enter takim with ssh tunneling (<code>takimhttp2</code>)</li>
</ol>
<ol type="a">
<li>Note that the difference between <code>takimhttp</code> and <code>takimhttp2</code> is just that the port numbers are different so the aliases work better. Additionally, having two different ports means that you are able to run RStudio and Jupyter Lab at the same time, if that is necessary for whatever reason.</li>
</ol>
<ol start="3" type="1">
<li>Start Jupyter Lab (<code>jlab</code>)</li>
</ol>
<ol type="a">
<li>If command does not work, you will have to install Jupyter Lab (https://jupyterlab.readthedocs.io/en/stable/getting_started/installation.html)</li>
</ol>
<ol start="4" type="1">
<li>Go to your favorite web browser (ie Chrome, Firefox, etc) and navigate to the following URL (localhost:your_preferred_port2).</li>
</ol>
<ol type="a">
<li>For example, if my preferred port is 1520, I would navigate to <code>localhost:1521</code>, which is my preferred port + 1.</li>
<li>If you have forgotten your preferred port2, you can find it with this command (<code>echo $PREFERRED_PORT2</code>)</li>
</ol>
<ol start="5" type="1">
<li>This should open Jupyter Lab in your browser, and you can use it like you normally do.</li>
</ol>
<p>Note: Please do not run large jobs in browser Jupyter Lab. Anything you run here runs on the login node (takim), which is not designed to have large computing power. If you run something too big, it will crash the takim login server, and nobody else will be able to use the cluster until it is restarted by PMACS!</p>


</section>

</main> <!-- /main -->
<script id="quarto-html-after-body" type="application/javascript">
window.document.addEventListener("DOMContentLoaded", function (event) {
  const toggleBodyColorMode = (bsSheetEl) => {
    const mode = bsSheetEl.getAttribute("data-mode");
    const bodyEl = window.document.querySelector("body");
    if (mode === "dark") {
      bodyEl.classList.add("quarto-dark");
      bodyEl.classList.remove("quarto-light");
    } else {
      bodyEl.classList.add("quarto-light");
      bodyEl.classList.remove("quarto-dark");
    }
  }
  const toggleBodyColorPrimary = () => {
    const bsSheetEl = window.document.querySelector("link#quarto-bootstrap");
    if (bsSheetEl) {
      toggleBodyColorMode(bsSheetEl);
    }
  }
  toggleBodyColorPrimary();  
  const icon = "";
  const anchorJS = new window.AnchorJS();
  anchorJS.options = {
    placement: 'right',
    icon: icon
  };
  anchorJS.add('.anchored');
  const clipboard = new window.ClipboardJS('.code-copy-button', {
    target: function(trigger) {
      return trigger.previousElementSibling;
    }
  });
  clipboard.on('success', function(e) {
    // button target
    const button = e.trigger;
    // don't keep focus
    button.blur();
    // flash "checked"
    button.classList.add('code-copy-button-checked');
    var currentTitle = button.getAttribute("title");
    button.setAttribute("title", "Copied!");
    let tooltip;
    if (window.bootstrap) {
      button.setAttribute("data-bs-toggle", "tooltip");
      button.setAttribute("data-bs-placement", "left");
      button.setAttribute("data-bs-title", "Copied!");
      tooltip = new bootstrap.Tooltip(button, 
        { trigger: "manual", 
          customClass: "code-copy-button-tooltip",
          offset: [0, -8]});
      tooltip.show();    
    }
    setTimeout(function() {
      if (tooltip) {
        tooltip.hide();
        button.removeAttribute("data-bs-title");
        button.removeAttribute("data-bs-toggle");
        button.removeAttribute("data-bs-placement");
      }
      button.setAttribute("title", currentTitle);
      button.classList.remove('code-copy-button-checked');
    }, 1000);
    // clear code selection
    e.clearSelection();
  });
  function tippyHover(el, contentFn) {
    const config = {
      allowHTML: true,
      content: contentFn,
      maxWidth: 500,
      delay: 100,
      arrow: false,
      appendTo: function(el) {
          return el.parentElement;
      },
      interactive: true,
      interactiveBorder: 10,
      theme: 'quarto',
      placement: 'bottom-start'
    };
    window.tippy(el, config); 
  }
  const noterefs = window.document.querySelectorAll('a[role="doc-noteref"]');
  for (var i=0; i<noterefs.length; i++) {
    const ref = noterefs[i];
    tippyHover(ref, function() {
      // use id or data attribute instead here
      let href = ref.getAttribute('data-footnote-href') || ref.getAttribute('href');
      try { href = new URL(href).hash; } catch {}
      const id = href.replace(/^#\/?/, "");
      const note = window.document.getElementById(id);
      return note.innerHTML;
    });
  }
  const findCites = (el) => {
    const parentEl = el.parentElement;
    if (parentEl) {
      const cites = parentEl.dataset.cites;
      if (cites) {
        return {
          el,
          cites: cites.split(' ')
        };
      } else {
        return findCites(el.parentElement)
      }
    } else {
      return undefined;
    }
  };
  var bibliorefs = window.document.querySelectorAll('a[role="doc-biblioref"]');
  for (var i=0; i<bibliorefs.length; i++) {
    const ref = bibliorefs[i];
    const citeInfo = findCites(ref);
    if (citeInfo) {
      tippyHover(citeInfo.el, function() {
        var popup = window.document.createElement('div');
        citeInfo.cites.forEach(function(cite) {
          var citeDiv = window.document.createElement('div');
          citeDiv.classList.add('hanging-indent');
          citeDiv.classList.add('csl-entry');
          var biblioDiv = window.document.getElementById('ref-' + cite);
          if (biblioDiv) {
            citeDiv.innerHTML = biblioDiv.innerHTML;
          }
          popup.appendChild(citeDiv);
        });
        return popup.innerHTML;
      });
    }
  }
});
</script>
</div> <!-- /content -->



</body></html>